<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roommate Finder</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="background-blobs"></div>
    
    <div class="container">
        <h2 class="header">üè† Roommate Finder</h2>
        <p class="typing-text" id="typingText">Finding your roommate...</p>

        <form id="roommateForm">
            <input type="text" name="name" placeholder="Enter your full name" required>
            <button type="submit">üîé Find Roommates</button>
        </form>

        <div class="spinner" id="spinner" style="display: none;"></div>

        <div class="result" id="result"></div>

        <p style="text-align: center; font-size: 14px; color: gray; margin-top: 10px;">
            Built with ‚ù§Ô∏è by Team A.H.A from CH
        </p>
    </div>

    <script>
        const form = document.getElementById('roommateForm');
        const spinner = document.getElementById('spinner');
        const resultDiv = document.getElementById('result');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.querySelector('input[name="name"]').value;
            spinner.style.display = 'block';
            resultDiv.textContent = '';
            resultDiv.classList.remove('fade-in');

            try {
                const response = await fetch('https://project1-production-0570.up.railway.app/find-roommates', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `name=${encodeURIComponent(name)}`
                });

                const result = await response.text();
                spinner.style.display = 'none';
                resultDiv.textContent = result;
                resultDiv.classList.add('fade-in');
            } catch (error) {
                spinner.style.display = 'none';
                resultDiv.innerHTML = '‚ùå <strong>Error:</strong> Could not find roommates. Try again later.';
                resultDiv.classList.add('fade-in');
            }
        });

        // Typing animation
        const text = "Finding your roommate...";
        let i = 0;
        function typeWriter() {
            if (i < text.length) {
                document.getElementById("typingText").innerHTML += text.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            }
        }
        document.getElementById("typingText").innerHTML = "";
        typeWriter();
    </script>
</body>
</html>
